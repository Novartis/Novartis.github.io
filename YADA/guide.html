<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2016-02-15
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160215" />
    <meta http-equiv="Content-Language" content="en" />
    <title>YADA Documentation - </title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>YADA</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2016-02-15</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 6.2.4-SNAPSHOT</li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Getting Started</li>
                                
      <li>
    
                          <a href="index.html" title="ReadMe">
          <i class="none"></i>
        ReadMe</a>
            </li>
                  
      <li>
    
                          <a href="deployment.html" title="Quickstart/Deployment Guide">
          <i class="none"></i>
        Quickstart/Deployment Guide</a>
            </li>
                              <li class="nav-header">Advanced Documentation</li>
                                
      <li>
    
                          <a href="admin.html" title="Admin Guide for Query Authors">
          <i class="none"></i>
        Admin Guide for Query Authors</a>
            </li>
                  
      <li class="active">
    
            <a href="#"><i class="none"></i>User/Developer Guide</a>
          </li>
                  
      <li>
    
                          <a href="pluginguide.html" title="Plugin Guide">
          <i class="none"></i>
        Plugin Guide</a>
            </li>
                  
      <li>
    
                          <a href="testing.html" title="Testing Notes">
          <i class="none"></i>
        Testing Notes</a>
            </li>
                              <li class="nav-header">Feature Specifications</li>
                                
      <li>
    
                          <a href="yada-api/apidocs/index.html" title="JavaDoc">
          <i class="none"></i>
        JavaDoc</a>
            </li>
                  
      <li>
    
                          <a href="yada-api/testapidocs/index.html" title="Test JavaDoc">
          <i class="none"></i>
        Test JavaDoc</a>
            </li>
                  
      <li>
    
                          <a href="uml.html" title="Java Visual Reference">
          <i class="none"></i>
        Java Visual Reference</a>
            </li>
                  
      <li>
    
                          <a href="params.html" title="YADA Parameters Reference">
          <i class="none"></i>
        YADA Parameters Reference</a>
            </li>
                  
      <li>
    
                          <a href="jsonparams.html" title="JSONParams Specification">
          <i class="none"></i>
        JSONParams Specification</a>
            </li>
                  
      <li>
    
                          <a href="filters.html" title="Filters Specification">
          <i class="none"></i>
        Filters Specification</a>
            </li>
                  
      <li>
    
                          <a href="harmony.html" title="Harmonizer Specification">
          <i class="none"></i>
        Harmonizer Specification</a>
            </li>
                  
      <li>
    
                          <a href="mail.html" title="Mail Specification">
          <i class="none"></i>
        Mail Specification</a>
            </li>
                              <li class="nav-header">Project License</li>
                                
      <li>
    
                          <a href="LICENSE.txt" title="Apache License v2.0">
          <i class="none"></i>
        Apache License v2.0</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                                                                                                
      <li>
    
                          <a href="project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
                                                                    
      <li>
    
                          <a href="project-reports.html" title="Project Reports">
          <i class="icon-chevron-right"></i>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <p><a name="top"></a></p>
<h1>What&#x2019;s here?</h1>

    <div style="float:right;margin-top:-43px;"><div style="float:right;margin-top:-43px;"><div style="float:right;margin-top:-43px;"><div style="float:right;margin-top:-43px;"><div style="float:right;margin-top:-43px;"><div style="float:right;margin-top:-43px;"><div style="float:right;margin-top:-43px;"><div style="float:right;margin-top:-43px;"><div style="float:right;margin-top:-43px;"><div style="float:right;margin-top:-43px;"><div style="float:right;margin-top:-43px;"><div style="float:right;margin-top:-43px;"><div style="float:right;margin-top:-43px;"><div style="float:right;margin-top:-43px;"><div style="float:right;margin-top:-43px;"><img src="images/blox250.png" alt="" /></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div>

<p>If you know your way around a computer, like a developer or data expert, this is a good place to be. If you need a bit more help, like a spreadsheet jockey or designer, use the <a href="faq.html">Beginners&#x2019; Guide/FAQ</a></p>

<ol style="list-style-type: decimal">
  
<li><a href="#using">Using YADA</a> (i.e., making YADA Requests)</li>
  
<li>YADA Markup</li>
  
<li>Defintions</li>
  
<li>The YADA &#x201c;Service&#x201d;</li>
  
<li>Query Authoring</li>
  
<li>The YADAQuery object</li>
  
<li>Client-side Development</li>
  
<li>Tips and Tricks</li>
</ol>
<p><a name="using"></a></p>
<h1>Using YADA</h1>
<p>Every request must contain either both <tt>qname</tt> and <tt>params</tt> request parameters, or a <tt>JSONParams</tt> parameter. Note that short parameter names are also available, so the previous sentence could read: Every query must contain either both <tt>q</tt> and <tt>p</tt> request parameters, or a <tt>j</tt> parameter</p>
<div class="section">
<h2>YADA Markup<a name="YADA_Markup"></a></h2>
<p>For authoring queries, use the following markup for parameter symbols:</p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th align="center">Markup</th>
      
<th align="left">Definition </th>
      
<th align="left">Description </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td align="center">?v </td>
      
<td align="left">VARCHAR, VARCHAR2, CHAR</td>
      
<td align="left">Any character-based data type</td>
    </tr>
    
<tr class="a">
      
<td align="center">?i </td>
      
<td align="left">INTEGER, INT </td>
      
<td align="left">Any integer data type </td>
    </tr>
    
<tr class="b">
      
<td align="center">?n </td>
      
<td align="left">NUMBER, DECIMAL </td>
      
<td align="left">Any floating point data type </td>
    </tr>
    
<tr class="a">
      
<td align="center">?d </td>
      
<td align="left">DATE </td>
      
<td align="left">Any date data type </td>
    </tr>
    
<tr class="b">
      
<td align="center">?t </td>
      
<td align="left">TIME </td>
      
<td align="left">Any time data type </td>
    </tr>
  </tbody>
</table></div>
<div class="section">
<h2>Definitions<a name="Definitions"></a></h2>
<p>Some terms that are used repeatedly throughout the documentation:</p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th align="left">Term </th>
      
<th align="left">Definition</th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td align="left">standard parameter</td>
      
<td align="left">a YADA request parameter appended to the url like &#x2018;qname&#x2019; in the following example: <tt>http://example.com/yada.jsp?qname=YADA+default</tt></td>
    </tr>
    
<tr class="a">
      
<td align="left">JSON parameter </td>
      
<td align="left">a YADA request parameter expressed using the <a href="jsonparams.html">JSONParams Specification</a></td>
    </tr>
    
<tr class="b">
      
<td align="left">default parameter </td>
      
<td align="left">a YADA request parameter that is stored with a query in the YADA Index and attached automatically to each request that references the query</td>
    </tr>
    
<tr class="a">
      
<td align="left">default value </td>
      
<td align="left">a parameter for which the default value is set by YADA, e.g., <tt>format=json</tt></td>
    </tr>
    
<tr class="b">
      
<td align="left">protocols </td>
      
<td align="left">a reference to one of the supported protocols, i.e., JDBC, SOAP, REST, or FILE</td>
    </tr>
    
<tr class="a">
      
<td align="left">YADA markup </td>
      
<td align="left">The modification of the query parameter symbol to indicate the datatype of the parameter in the query itself, e.g., <tt>?v, ?i, ?d, ?n, ?t</tt></td>
    </tr>
  </tbody>
</table>
<h1>YADA Services</h1>
<p>Most users coming to this page just want data, and probably want it from an existing YADA app. Getting data from these sources is simple, and in fact, is precisely the way data is delivered to the single-page Javascript application using YADA under the hood.</p></div>
<div class="section">
<h2>Curl Example<a name="Curl_Example"></a></h2>
<p>From the linux command-line, or any system call, a user can request any data simply using a known query, with standard parameters. For example, the following query will return the Oracle&#xae; SYSDATE of the YADA server in a standard YADA JSON string.</p>

<div class="source">
<pre>curl &quot;http://example.com/yada.jsp?qname=YADA+default&quot;
 
# returns
# {&quot;RESULTSET&quot;:{&quot;total&quot;: 1,&quot;ROWS&quot;: [{&quot;RNUM&quot;: &quot;1&quot;,&quot;SYSDATE&quot;: &quot;2014-10-27 17:34:43.0&quot;}],&quot;qname&quot;: &quot;YADA default&quot;,&quot;page&quot;: &quot;1&quot;,&quot;records&quot;: 1}}
 
# short params names are available to:
# curl &quot;http://example.com/yada.jsp?q=YADA+default&quot;
</pre></div>
<p>The JSON params version of the above query is</p>

<div class="source">
<pre>curl &quot;http://example.com/yada.jsp?JSONParams=[{qname:YADA default,DATA:[{}]}]&quot;
 
# returns
# {&quot;RESULTSET&quot;: {&quot;total&quot;: 1,&quot;ROWS&quot;: [{&quot;RNUM&quot;: &quot;1&quot;,&quot;SYSDATE&quot;: &quot;2014-10-27 17:34:43.0&quot;}],&quot;qname&quot;: &quot;YADA default&quot;,&quot;page&quot;: &quot;1&quot;,&quot;records&quot;: 1}}
 
# using short param names:
# curl &quot;http://example.com/yada.jsp?j=[{qname:YADA default,DATA:[{}]}]&quot;
</pre></div>
<h1>Query Authoring</h1>
<p>Some users are authoring their own queries to access configured data sources. These queries, especially for JDBC, are bascially SQL queries with some minimal added markup. Basic knowledge of the source database schemas, REST or SOAP API, or Filesystem, is required&#x2014;just like in any other query-authoring scenario.</p></div>
<div class="section">
<h2>YADA Markup<a name="YADA_Markup"></a></h2>
<p>All YADA queries with value parameters require YADA markup, whether they are processed as positional parameters, or transmitted as name/value pairs in JSONParams strings. At a minimum, for example, for REST queries which always take Strings as values, probably only require <tt>?v</tt> for parameter placeholders. See <a href="&apos;&apos;">JDBC queries with datatypes</a> below, for more details.</p></div>
<div class="section">
<h2>Parameterized Queries<a name="Parameterized_Queries"></a></h2>
<div class="section">
<h3>Positional Parameters<a name="Positional_Parameters"></a></h3>
<p>YADA supports positional parameters for all supported protocols: JDBC, REST, SOAP, and FILE. Given that you&#x2019;re reading this, you probably understand what positional parameters are and how to use them, so we won&#x2019;t go into too much detail.<br />Say you want to get a users id number from your database using first and last name as search criteria. You could write the following query: </p>

<div class="source">
<pre>SELECT ID FROM MY_TABLE WHERE FIRST_NAME = 'Joe' AND LAST_NAME = 'Cool';
</pre></div>
<p>This will return Joe Cool&#x2019;s id number. But what if you want to enable users of a webapp to search using their own names? You have to write the query so the values &#x2018;Joe&#x2019; and &#x2018;Cool&#x2019; can be substituted with a user&#x2019;s own criteria. The way to do this is to parametirize the query. The standard syntax for a query parameter is a question mark: ? . See YADA Markup at the bottom of this subsection for how to markup this query with a datatype indicator, to make it YADA compatible.</p>

<div class="source">
<pre>SELECT ID FROM MY_TABLE WHERE FIRST_NAME = ? AND LAST_NAME = ?;
</pre></div>
<p>Internally, when a parameterized query is processed, it is typically embedded in some kind of object such as a <a class="externalLink" href="http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html">java.sql.PreparedStatement</a>, which in addition to housing the statement, also offers methods for setting parameter values, such as [setString(int index, String value)](<a class="externalLink" href="http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#setString(int,%20java.lang.String))">http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#setString(int,%20java.lang.String))</a>. Java&#xae;, .NET&#xae;, Perl, Python, and other platforms all offer similar methods. YADA uses Java&#xae; internally to apply values to the appropriate parameters. </p>
<p>When YADA <a href="params.html#params">standard parameters</a> are in use, positional parameters correspond to the order in which they are conveyed in the request url, for example:</p>

<div class="source">
<pre># parameter 1: Joe
# parameter 2: Cool
# Request:
http://example.com/yada.jsp?qname=my+named+query&amp;params=Joe,Cool

# The following statement is not equivalent to the former:
http://example.com/yada.jsp?qname=my+name+query&amp;params=Cool,Joe
</pre></div>
<p>When JSON parameters are in use, the values to plug in to the query are associated to column names, so order is not significant:</p>

<div class="source">
<pre># The following statements are equivalent
http://example.com/yada.jsp?JSONparams=[{qname:my named query,DATA[{FIRST_NAME:Joe,LAST_NAME:Cool}]}]
http://example.com/yada.jsp?JSONparams=[{qname:my named query,DATA[{LAST_NAME:Cool,FIRST_NAME:Joe}]}]
</pre></div></div>
<div class="section">
<h3>YADA Markup<a name="YADA_Markup"></a></h3>
<p>As noted above, all YADA queries require parameter symbols (?) to be accompanied by YADA markup datatype indicators. Thus the example query above should be written as follows: <tt>sql
SELECT ID FROM MY_TABLE WHERE FIRST_NAME = ?v AND LAST_NAME = ?v;
</tt></p>
<p>See <a href="&apos;&apos;">JDBC queries with datatypes</a> below, for more details.</p></div>
<div class="section">
<h3>JDBC Queries with Datatypes<a name="JDBC_Queries_with_Datatypes"></a></h3>
<p>Parameterized JDBC queries require data typing, because values correspond to database columns which themselves are typed. YADA currently supports four datatypes for parameterized JDBC queries: <i>character</i>, <i>integer</i>, <i>number</i> (floating point), and <i>date</i>. As noted above, when writing an SQL query to be executed via JDBC, the question mark character ( ? ) is used as a positional parameter marker, and values and data types are &#x201c;plugged in&#x201d; to these positions programmatically. With YADA, there must be a shortcut system to convey not only the position of parameters, but also their datatypes, simultaneously. This is achieved for all protocols using the designated markup:</p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th align="center">Markup</th>
      
<th align="left">Definition </th>
      
<th align="left">Description </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td align="center">?v </td>
      
<td align="left">VARCHAR,VARCHAR2,CHAR</td>
      
<td align="left">Any character-based data type</td>
    </tr>
    
<tr class="a">
      
<td align="center">?i </td>
      
<td align="left">INTEGER,INT </td>
      
<td align="left">Any integer data type </td>
    </tr>
    
<tr class="b">
      
<td align="center">?n </td>
      
<td align="left">NUMBER,DECIMAL </td>
      
<td align="left">Any floating point data type </td>
    </tr>
    
<tr class="a">
      
<td align="center">?d </td>
      
<td align="left">DATE </td>
      
<td align="left">Any date data type </td>
    </tr>
  </tbody>
</table></div></div>
<div class="section">
<h2>SQL (JDBC)<a name="SQL_JDBC"></a></h2>
<p>Virtually any SQL statement is supported by YADA. Again, if the statement is not ANSI-compliant, or otherwise un-parseable, the YADA adaptor will fall back to the use of positional parameters.</p>
<p>An example:</p>

<div class="source">
<pre>select * mytable where col1 = ?v where col2 = ?i
</pre></div>
<p>Calling the above query from a curl call would look like the following,assuming the query is stored with name <tt>EXMPL example</tt>, and with the string, <tt>abc</tt>, in the first params position, and an integer, <tt>123</tt>, in the second</p>

<div class="source">
<pre>curl &quot;http://example.com/yada.jsp?qname=EXMPL+example&amp;params=abc,123&quot;
</pre></div></div>
<div class="section">
<h2>REST Example<a name="REST_Example"></a></h2>
<p>REST queries behave like proxied queries to third party services. In fact, if you&#x2019;re writing a javascript application, YADA is a great single-origin-policy workaround. Even if this isn&#x2019;t an issue, YADA enables the aggregation of multiple queries in a single http request, even from multiple sources, and the stacking or harmonization of results. REST queries look just like any other YADA query when being called. Here&#x2019;s an example of a EBI QuickGO query:</p>

<div class="source">
<pre>http://example.com/yada.jsp?q=QGO%20search&amp;params=0005515
</pre></div>
<p>Here&#x2019;s an example from TODO example:</p>

<div class="source">
<pre>http://example.com/yada.jsp?example
</pre></div>
<p>These are the results of the example query, below. Note, by default, results are wrapped in the standard YADA JSON object structure:</p>

<div class="source">
<pre>{&quot;RESULTSET&quot;: {&quot;ROWS&quot;: [
</pre></div>
<p>It is also possible to use one of the built in Response classes to simply pass through the REST result as is. The new query, with the &#x2018;r=RESTPassThruResponse&#x2019; parameter:</p>

<div class="source">
<pre>http://example.com/yada.jsp?q=N&amp;p=&amp;r=RESTPassThruResponse
</pre></div>
<p>And the result:</p>

<div class="source">
<pre>{ ... }
</pre></div></div>
<div class="section">
<h2>More to come soon!<a name="More_to_come_soon"></a></h2></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                    2016
                        <a href="http://opensource.nibr.com">Novartis Institutes for BioMedical Research, Inc</a>.
                  
                    
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
